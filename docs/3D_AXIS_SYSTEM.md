# 3D坐标轴系统

为Vizuara可视化库添加了专门为科学计算数据显示设计的3D坐标轴系统。

## 功能特点

### 坐标轴组件
- **完整的3D坐标系统**：支持X、Y、Z三个轴的独立配置
- **智能颜色编码**：X轴红色、Y轴绿色、Z轴蓝色
- **灵活的刻度系统**：支持主刻度和次刻度，可自定义数量
- **网格支持**：三种网格模式（无网格、主网格、主+次网格）

### 样式定制
- **线条样式**：可配置轴线宽度、颜色、透明度
- **刻度样式**：独立的主次刻度长度和颜色配置
- **网格样式**：可调节网格线的颜色、宽度和透明度
- **标签样式**：支持轴标题和刻度标签的字体大小和颜色

### 科学数据可视化
- **数据范围映射**：自动将数据值映射到坐标轴位置
- **单位标注**：支持轴标题中的单位显示（如"X轴 (米)"）
- **边界框计算**：自动计算坐标系的3D边界框
- **原点标记**：可选的原点标记显示

## 使用方法

### 基本用法

```rust
use vizuara_3d::{CoordinateSystem3D, GridType};
use nalgebra::Point3;

// 创建坐标系统
let coordinate_system = CoordinateSystem3D::new(
    (-5.0, 5.0),   // X轴范围
    (-5.0, 5.0),   // Y轴范围
    (-5.0, 5.0),   // Z轴范围
    Point3::new(-5.0, -5.0, -5.0), // 原点位置
    1.0,           // 缩放因子
)
.axis_titles("X轴 (米)", "Y轴 (米)", "Z轴 (时间)")
.grid(GridType::Major);

// 在渲染时使用
renderer.render_with_axes(
    &surface,
    &objects,
    &coordinate_system,
    aspect_ratio,
)?;
```

### 高级配置

```rust
use vizuara_3d::{Axis3D, Axis3DDirection, Axis3DStyle, GridType};
use vizuara_core::{Color, LinearScale};

// 自定义轴样式
let custom_style = Axis3DStyle {
    axis_color: Color::rgb(0.8, 0.2, 0.2),
    axis_width: 3.0,
    tick_color: Color::rgb(0.6, 0.6, 0.6),
    tick_length: 0.1,
    grid_color: Color::rgba(0.5, 0.5, 0.5, 0.3),
    grid_width: 1.5,
    // ... 其他样式配置
    ..Default::default()
};

// 创建自定义轴
let x_axis = Axis3D::new(
    Axis3DDirection::X,
    LinearScale::new(-10.0, 10.0),
    Point3::new(0.0, 0.0, 0.0),
    20.0,
)
.title("位置 (mm)")
.major_ticks(10)
.minor_ticks(4)
.grid(GridType::MajorMinor)
.style(custom_style);
```

## 示例演示

运行以下命令查看3D坐标轴的演示：

```bash
cargo run -p vizuara-examples --bin axis3d_demo
```

### 演示功能
- **3D螺旋数据点**：展示50个沿螺旋路径分布的彩色立方体
- **交互控制**：
  - 空格键：切换坐标轴显示/隐藏
  - G键：循环切换网格类型（无/主/主+次）
  - 滚轮：缩放视图
  - 鼠标拖拽：旋转相机（即将实现）

### 视觉效果
- **颜色编码**：数据点根据空间位置着色
- **坐标轴**：三色轴线清晰标示空间方向
- **网格系统**：帮助用户理解空间结构
- **实时切换**：动态切换显示模式

## 技术实现

### 渲染管线
- **双管线架构**：分离的3D对象渲染管线和坐标轴线条渲染管线
- **深度测试**：正确的深度排序，坐标轴不会不当遮挡数据
- **高效顶点生成**：按需生成坐标轴几何数据

### 着色器系统
- **线条着色器**：专门的axis3d.wgsl着色器处理线条渲染
- **颜色插值**：平滑的颜色过渡和透明度支持
- **统一变换**：与主渲染管线共享相机和投影矩阵

### 内存管理
- **缓冲区复用**：智能的顶点缓冲区管理
- **按需更新**：只在坐标系配置变化时重新生成几何数据
- **GPU优化**：所有计算在GPU端执行

## 应用场景

### 科学计算
- **物理仿真**：粒子系统、流体动力学、固体力学
- **数值分析**：函数可视化、优化路径、收敛分析
- **统计分析**：多维数据探索、聚类可视化

### 工程应用
- **CAD/CAM**：机械设计、建筑模型、产品原型
- **测量数据**：传感器数据、测试结果、质量控制
- **仿真结果**：有限元分析、CFD结果、电磁场分析

### 数据科学
- **高维数据**：降维可视化、特征空间探索
- **时间序列**：3D轨迹、多变量时序
- **地理信息**：空间数据、地形可视化、气象数据

## 性能特点

- **高效渲染**：线条绘制优化，适合实时交互
- **内存友好**：最小化GPU内存使用
- **可扩展性**：支持大量数据点的同时显示坐标轴
- **跨平台**：基于WGPU，支持多种图形API

## 未来扩展

- **标签渲染**：3D空间中的刻度标签文本渲染
- **动态轴**：根据数据范围自动调整轴范围
- **对数轴**：科学计数法和对数刻度支持
- **多坐标系**：支持多个坐标系同时显示
- **交互功能**：轴拖拽、范围选择、动态缩放
